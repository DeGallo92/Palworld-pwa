<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pal Skills Tracker</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Pal Tracker">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <style>
  .rowbtns{display:flex;gap:8px;flex-wrap:wrap}
  .rowbtns button{background:#242733;border:1px solid #333;color:#eaeef6;padding:8px 10px;border-radius:8px;cursor:pointer}
  .rowbtns button.primary{background:linear-gradient(180deg,#465bce,#3a4fb4);border:0}
  </style>
</head>
<body>
  <header>
    <h1>Pal Skills Tracker</h1>
    <div class="actions">
      <button id="exportBtn" title="Exporteer naar JSON">Export</button>
      <label class="import-label">Import
        <input type="file" id="importInput" accept="application/json" />
      </label>
      <button id="resetBtn" title="Alles leegmaken">Reset</button>
      <button id="installBtn" hidden>Installeer app</button>
    </div>
  </header>

  <main>
    <section class="card">
      <h2>Nieuwe entry</h2>
      <div class="form-grid">
        <label>
          Paldex #
          <input type="text" id="paldex" placeholder="bv. 10 of 10B">
        </label>
        <label>
          Pal naam
          <input list="palnames" type="text" id="palname" placeholder="bv. Azurmane">
          <datalist id="palnames"></datalist>
          <small>Tip: kies uit de lijst om typfouten te vermijden. Paldex wordt dan automatisch ingevuld.</small>
        </label>
        <label>
          Skills (max 4)
          <select id="skills" multiple size="6">
            <option>Legend</option><option>DG</option><option>V</option><option>DB</option><option>EF</option>
            <option>SV</option><option>HIK</option><option>EE</option><option>KW</option><option>RC</option><option>Lucky</option>
          </select>
          <small>Kies 1‚Äì4 skills. De combinatie wordt automatisch genormaliseerd (gesorteerd).</small>
        </label>
        <fieldset>
          <legend>Geslacht in bezit</legend>
          <label class="chk"><input type="checkbox" id="hasM"> Mannelijk</label>
          <label class="chk"><input type="checkbox" id="hasF"> Vrouwelijk</label>
        </fieldset>
        <div class="rowbtns">
          <button id="addBtn" class="primary">Toevoegen / Bijwerken</button>
          <button id="delComboBtn" title="Verwijder geselecteerde combo">Verwijder combo</button>
          <button id="deleteBtn" title="Verwijder hele Pal">üóëÔ∏è Verwijder Pal</button>
        </div>
      </div>
      <p id="msg" class="msg"></p>
    </section>

    <section class="card">
      <div class="toolbar">
        <div class="left">
          <button id="toggleViewBtn" class="ghost">üì± Kaarten</button>
          <select id="comboFilter">
            <option value="">Alle combinaties</option>
          </select>
        </div>
        <div class="right">
          <input type="text" id="search" placeholder="Zoek Pal...">
          <label class="chk"><input type="checkbox" id="showMissingM"> Enkel missende M</label>
          <label class="chk"><input type="checkbox" id="showMissingF"> Enkel missende F</label>
          <button id="openSettings">‚öôÔ∏è Palpedia</button>
        </div>
      </div>

      <!-- TABEL VIEW -->
      <div id="tableWrap" class="table-wrap">
        <table id="grid">
          <thead id="thead"></thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>

      <!-- CARDS VIEW -->
      <div id="cards" class="cards hidden"></div>

      <small>Tip: voeg deze webapp toe aan je iPhone-beginscherm. Werkt offline.</small>
    </section>

    <dialog id="settingsDlg">
      <h3>Palpedia beheren</h3>
      <p>De Palpedia is een lijst met <b>Pal naam ‚Üí Paldex ID</b> (bv. 10 of 10B). Deze app gebruikt ze voor auto-complete en om het juiste ID automatisch in te vullen.</p>
      <div class="settings-grid">
        <div>
          <button id="downloadPaldex">Exporteer huidige Palpedia</button>
        </div>
        <div>
          <label class="import-label">Importeer Palpedia (JSON)
            <input type="file" id="importPaldex" accept="application/json" />
          </label>
        </div>
      </div>
      <details>
        <summary>Manueel toevoegen</summary>
        <div class="manual">
          <input type="text" id="palDexManual" placeholder="# bv. 10B">
          <input type="text" id="palNameManual" placeholder="Pal naam">
          <button id="addPaldexBtn">Toevoegen</button>
        </div>
      </details>
      <details>
        <summary>Plak Palpedia-tekst (van Game8) ‚Üí auto inladen</summary>
        <textarea id="pastePaldex" rows="8" placeholder="Plak hier tekst van de Game8-pagina..."></textarea>
        <div class="manual">
          <button id="parsePaldexBtn">Parse & Opslaan</button>
        </div>
        <small>Herkenning: '10 Pengullet', '10B Pengullet Lux', '55 Chillet', ‚Ä¶</small>
      </details>
      <div class="dlg-actions">
        <button id="closeSettings">Sluiten</button>
      </div>
    </dialog>
  </main>

  <footer>
    <span>Gemaakt voor Glenn ‚Ä¢ Lokaal opgeslagen</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
