<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pal Skills Tracker</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Pal Tracker">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Pal Skills Tracker</h1>
    <div class="actions">
      <button id="exportBtn" title="Exporteer naar JSON">Export</button>
      <label class="import-label">Import
        <input type="file" id="importInput" accept="application/json" />
      </label>
      <button id="resetBtn" title="Alles leegmaken">Reset</button>
      <button id="installBtn" hidden>Installeer app</button>
    </div>
  </header>

  <main>
    <section class="card">
      <h2>Nieuwe entry</h2>
      <div class="form-grid">
        <label>
          Paldex #
          <input type="text" id="paldex" placeholder="bv. 10 of 10B">
        </label>
        <label>
          Pal naam
          <input list="palnames" type="text" id="palname" placeholder="bv. Azurmane">
          <datalist id="palnames"></datalist>
          <small>Tip: kies uit de lijst om typfouten te vermijden. Paldex wordt dan automatisch ingevuld.</small>
        </label>
        <label>
          Skills (max 4)
          <select id="skills" multiple size="6">
            <option>Legend</option><option>DG</option><option>V</option><option>DB</option><option>EF</option>
            <option>SV</option><option>HIK</option><option>EE</option><option>KW</option><option>RC</option><option>Lucky</option>
          </select>
          <small>Kies 1–4 skills. De combinatie wordt automatisch genormaliseerd (gesorteerd).</small>
        </label>
        <fieldset>
          <legend>Geslacht in bezit</legend>
          <label class="chk"><input type="checkbox" id="hasM"> Mannelijk</label>
          <label class="chk"><input type="checkbox" id="hasF"> Vrouwelijk</label>
        </fieldset>
        <button id="addBtn" class="primary">Toevoegen / Bijwerken</button>
      </div>
      <p id="msg" class="msg"></p>
    </section>

    <section class="card">
      <div class="toolbar">
        <div class="search">
          <input type="text" id="search" placeholder="Zoek Pal...">
        </div>
        <div class="toggles">
          <label class="chk"><input type="checkbox" id="showMissingM"> Toon missende M</label>
          <label class="chk"><input type="checkbox" id="showMissingF"> Toon missende F</label>
        </div>
        <div class="settings">
          <button id="openSettings">⚙️ Palpedia</button>
        </div>
      </div>
      <div class="table-wrap">
        <table id="grid">
          <thead id="thead"></thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
      <small>Tip: je kan deze webapp toevoegen aan je iPhone beginscherm of installeren op desktop. Werkt offline.</small>
    </section>

    <dialog id="settingsDlg">
      <h3>Palpedia beheren</h3>
      <p>De Palpedia is een lijst met <b>Pal naam → Paldex ID</b> (bv. 10 of 10B). Deze app gebruikt ze voor auto-complete en om het juiste ID automatisch in te vullen.</p>
      <div class="settings-grid">
        <div>
          <button id="downloadPaldex">Exporteer huidige Palpedia</button>
        </div>
        <div>
          <label class="import-label">Importeer Palpedia (JSON)
            <input type="file" id="importPaldex" accept="application/json" />
          </label>
        </div>
      </div>
      <details>
        <summary>Manueel toevoegen</summary>
        <div class="manual">
          <input type="text" id="palDexManual" placeholder="# bv. 10B">
          <input type="text" id="palNameManual" placeholder="Pal naam">
          <button id="addPaldexBtn">Toevoegen</button>
        </div>
      </details>
      <details>
        <summary>Plak Palpedia-tekst (van Game8) → auto inladen</summary>
        <textarea id="pastePaldex" rows="8" placeholder="Plak hier tekst van de Game8-pagina..."></textarea>
        <div class="manual">
          <button id="parsePaldexBtn">Parse & Opslaan</button>
        </div>
        <small>Tip: kopieer het lijstgedeelte met No. en Pal-namen. De parser herkent vormen als '10 Pengullet', '10B Pengullet Lux', '55 Chillet'.</small>
      </details>
      <div class="dlg-actions">
        <button id="closeSettings">Sluiten</button>
      </div>
    </dialog>
  </main>

  <footer>
    <span>Gemaakt voor Glenn • Lokaal opgeslagen</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
